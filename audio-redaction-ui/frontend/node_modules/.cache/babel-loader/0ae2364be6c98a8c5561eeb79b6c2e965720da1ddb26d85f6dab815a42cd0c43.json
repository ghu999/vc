{"ast":null,"code":"import{useState,useEffect}from\"react\";import\"../App.css\";import audio_path from\"../data/highlight-5300643.mp3\";//import redacted_path from \"../data/redacted_5300643.mp3\"\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TranscriptDisplay=_ref=>{let{transcript,redactedAudio,setRedactedAudio}=_ref;const[selectedWords,setSelectedWords]=useState([]);const[selectAll,setSelectAll]=useState(false);const handleWordClick=word=>{if(selectAll){const allInstances=transcript.split(\" \").map((w,idx)=>w===word?idx:null).filter(idx=>idx!==null);if(selectedWords.some(w=>allInstances.includes(w))){setSelectedWords(selectedWords.filter(w=>!allInstances.includes(w)));}else{setSelectedWords([...selectedWords,...allInstances]);}}else{if(selectedWords.includes(word)){// Deselect the word if it's already selected\nsetSelectedWords(selectedWords.filter(w=>w!==word));}else{// Select the word\nsetSelectedWords([...selectedWords,word]);}}};const clearAll=()=>{setSelectedWords([]);};const redact=()=>{if(selectedWords.length===0){alert(\"Please select words to redact.\");return;}// Make a POST request to the backend to redact the selected words\nfetch(\"http://127.0.0.1:5000/api/redact\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({words:selectedWords})}).then(response=>{if(!response.ok){throw new Error(\"Failed to generate redacted audio.\");}return response.json();}).then(data=>{alert(\"Redacted audio successfully created!\");// Optionally, handle the redacted audio file path\nsetRedactedAudio(\"http://localhost:9000\".concat(data.filePath));console.log(\"Redacted audio file path:\",data.filePath);}).catch(error=>{console.error(\"Error during redaction:\",error);alert(\"An error occurred while redacting the audio. \".concat(error));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"transcript-container-scrollable\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"10px\"},children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectAll,onChange:e=>setSelectAll(e.target.checked)}),\"Select All Instances of a Word\"]})}),/*#__PURE__*/_jsx(\"p\",{children:transcript&&transcript.split(\" \").map((word,index)=>/*#__PURE__*/_jsx(\"span\",{onClick:()=>handleWordClick(word),style:{cursor:\"pointer\",marginRight:\"5px\",color:selectedWords.includes(word)?\"blue\":\"black\",backgroundColor:selectedWords.includes(word)?\"#d0ebff\":\"transparent\",padding:\"2px 4px\",borderRadius:\"4px\"//wordWrap: \"normal\"\n},children:word},index))}),/*#__PURE__*/_jsx(\"h3\",{children:\"Transcript Audio\"}),/*#__PURE__*/_jsxs(\"audio\",{controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:audio_path,type:\"audio/mpeg\"}),\"Your browser does not support the audio element.\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"10px\"},children:selectedWords.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Selected Words: \",/*#__PURE__*/_jsx(\"strong\",{children:selectedWords.join(\", \")})]}),/*#__PURE__*/_jsx(\"button\",{onClick:clearAll,style:{padding:\"6px 12px\",fontSize:\"14px\",backgroundColor:\"#ff4d4d\",color:\"white\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\"},children:\"Clear All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:redact,style:{padding:\"6px 12px\",fontSize:\"14px\",backgroundColor:\"#ff4d4d\",color:\"white\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\"},children:\"Redact\"})]})}),redactedAudio&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Redacted Audio:\"}),/*#__PURE__*/_jsxs(\"audio\",{controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:redactedAudio,type:\"audio/mpeg\"}),\"Your browser does not support the audio element.\"]},redactedAudio)]})]});};// Example usage\nconst AudioRedactionUI=()=>{const[transcript,setTranscript]=useState();const[redactedAudio,setRedactedAudio]=useState(null);useEffect(()=>{console.log(\"transcript changed...\",transcript?[0]:\"empty\");},[transcript]);useEffect(()=>{if(!transcript){// Fetch the transcript from the Flask backend\nfetch(\"http://127.0.0.1:5000/api/transcript\").then(response=>response.json()).then(data=>{setTranscript(data.transcript);console.log(data.transcript);}).catch(error=>console.error(\"Error fetching transcript:\",error));console.log(\"App::useEffect called...\");}},[transcript]);// if (!transcript) return <p>Loading transcript...</p>;\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"transcript-container-scrollable\",children:/*#__PURE__*/_jsx(TranscriptDisplay,{transcript:transcript,redactedAudio:redactedAudio,setRedactedAudio:setRedactedAudio})});};export default AudioRedactionUI;","map":{"version":3,"names":["useState","useEffect","audio_path","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TranscriptDisplay","_ref","transcript","redactedAudio","setRedactedAudio","selectedWords","setSelectedWords","selectAll","setSelectAll","handleWordClick","word","allInstances","split","map","w","idx","filter","some","includes","clearAll","redact","length","alert","fetch","method","headers","body","JSON","stringify","words","then","response","ok","Error","json","data","concat","filePath","console","log","catch","error","className","children","style","marginBottom","type","checked","onChange","e","target","index","onClick","cursor","marginRight","color","backgroundColor","padding","borderRadius","controls","src","marginTop","join","fontSize","border","AudioRedactionUI","setTranscript"],"sources":["/Users/granthu/VC Prototype/vc/audio-redaction-ui/frontend/src/components/AudioRedactionUI.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"../App.css\";\nimport audio_path from \"../data/highlight-5300643.mp3\"\n//import redacted_path from \"../data/redacted_5300643.mp3\"\nconst TranscriptDisplay = ({ transcript, redactedAudio, setRedactedAudio }) => {\n  const [selectedWords, setSelectedWords] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const handleWordClick = (word) => {\n    if (selectAll) {\n      const allInstances = transcript.split(\" \").map((w, idx) => (w === word ? idx : null)).filter((idx => idx !== null));\n      if (selectedWords.some((w) => allInstances.includes(w))) {\n        setSelectedWords(selectedWords.filter((w) => !allInstances.includes(w)));\n\n      } else {\n        setSelectedWords([...selectedWords, ...allInstances]);\n      }\n    } else {\n      if (selectedWords.includes(word)) {\n          // Deselect the word if it's already selected\n          setSelectedWords(selectedWords.filter((w) => w !== word));\n        } else {\n          // Select the word\n          setSelectedWords([...selectedWords, word]);\n      }\n    }\n  };\n\n  const clearAll = () => {\n    setSelectedWords([]);\n  }\n\n  const redact = () => {\n    if (selectedWords.length === 0) {\n      alert(\"Please select words to redact.\");\n      return;\n    }\n\n    // Make a POST request to the backend to redact the selected words\n    fetch(\"http://127.0.0.1:5000/api/redact\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ words: selectedWords }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Failed to generate redacted audio.\");\n        }\n        return response.json();\n      })\n      .then((data) => {\n        alert(\"Redacted audio successfully created!\");\n        // Optionally, handle the redacted audio file path\n        setRedactedAudio(`http://localhost:9000${data.filePath}`);\n        console.log(\"Redacted audio file path:\", data.filePath);\n      })\n      .catch((error) => {\n        console.error(\"Error during redaction:\", error);\n        alert(`An error occurred while redacting the audio. ${error}`);\n      });\n  };\n\n\n  return (\n    <div className=\"transcript-container-scrollable\">\n      <div style={{ marginBottom: \"10px\" }}>\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={selectAll}\n            onChange={(e) => setSelectAll(e.target.checked)}\n          />\n          Select All Instances of a Word\n        </label>\n      </div>\n      <p>\n        {transcript && transcript.split(\" \").map((word, index) => (\n          <span\n            key={index}\n            onClick={() => handleWordClick(word)}\n            style={{\n              cursor: \"pointer\",\n              marginRight: \"5px\",\n              color: selectedWords.includes(word) ? \"blue\" : \"black\",\n              backgroundColor: selectedWords.includes(word) ? \"#d0ebff\" : \"transparent\",\n              padding: \"2px 4px\",\n              borderRadius: \"4px\",\n              //wordWrap: \"normal\"\n            }}\n          >\n            {word}\n          </span>\n        ))}\n      </p>\n      <h3>Transcript Audio</h3>\n      <audio controls>\n        <source src={audio_path} type=\"audio/mpeg\" />\n        Your browser does not support the audio element.\n      </audio>\n      <div style={{marginTop: \"10px\"}}>\n      {selectedWords.length > 0 && (\n        <>\n        <p>\n          Selected Words: <strong>{selectedWords.join(\", \")}</strong>\n          </p>\n          <button\n              onClick={clearAll}\n              style={{\n                padding: \"6px 12px\",\n                fontSize: \"14px\",\n                backgroundColor: \"#ff4d4d\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"4px\",\n                cursor: \"pointer\",\n              }}\n            >\n              Clear All\n            </button>\n            <button\n              onClick={redact}\n              style={{\n                padding: \"6px 12px\",\n                fontSize: \"14px\",\n                backgroundColor: \"#ff4d4d\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"4px\",\n                cursor: \"pointer\",\n              }}\n            >\n              Redact\n            </button>\n        </>\n        \n      )}\n      </div>\n       {/* Display the redacted audio */}\n{redactedAudio &&\n        <div>\n          <h3>Redacted Audio:</h3>\n          <audio key={redactedAudio} controls>\n            <source src={redactedAudio} type=\"audio/mpeg\"/>\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n}\n\n    </div>\n  );\n};\n\n// Example usage\nconst AudioRedactionUI = () => {\n  const [transcript, setTranscript] = useState();\n  const [redactedAudio, setRedactedAudio] = useState(null);\n\n  useEffect(() => {\n    console.log(\"transcript changed...\", transcript?[0] : \"empty\")\n  }, [transcript]);\n\n  useEffect(() => {\n    if (!transcript) {\n      // Fetch the transcript from the Flask backend\n      fetch(\"http://127.0.0.1:5000/api/transcript\")\n        .then((response) => response.json())\n        .then((data) => {\n          setTranscript(data.transcript);\n          console.log(data.transcript)\n        })\n        .catch((error) => console.error(\"Error fetching transcript:\", error));\n\n        console.log(\"App::useEffect called...\");\n    }\n  }, [transcript]);\n\n  // if (!transcript) return <p>Loading transcript...</p>;\n\n  return (<div className=\"transcript-container-scrollable\">\n    <TranscriptDisplay transcript={transcript} redactedAudio={redactedAudio} setRedactedAudio={setRedactedAudio}></TranscriptDisplay>\n  </div>\n  );\n};\n\nexport default AudioRedactionUI;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}